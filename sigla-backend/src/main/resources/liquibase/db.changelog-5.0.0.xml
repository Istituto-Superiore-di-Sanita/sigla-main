<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
                                       http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="marco.spasiano" id="addColumn-ti_bollo-voce_iva">
        <addColumn tableName="voce_iva">
            <column name="ti_bollo" type="CHAR(1)" defaultValue="N" remarks="Codice IVA soggetto a Bollo Dominio: S  =  Sì N  =  No D  =  Specifica Dicitura indicata su Configurazione CNR.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="marco.spasiano" id="configurazione_cnr-add-bollo-virtuale">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/configurazione_cnr_bollo_virtuale.csv" quotchar="&quot;" separator="," tableName="configurazione_cnr">
            <column header="esercizio" name="esercizio" type="NUMERIC"/>
            <column header="cd_unita_funzionale" name="cd_unita_funzionale" type="STRING"/>
            <column header="cd_chiave_primaria" name="cd_chiave_primaria" type="STRING"/>
            <column header="cd_chiave_secondaria" name="cd_chiave_secondaria" type="STRING"/>
            <column header="val01" name="val01" type="STRING"/>
            <column header="val02" name="val02" type="STRING"/>
            <column header="val03" name="val03" type="STRING"/>
            <column header="val04" name="val04" type="STRING"/>
            <column header="im01" name="im01" type="NUMERIC"/>
            <column header="im02" name="im02" type="NUMERIC"/>
            <column header="dt01" name="dt01" type="${date.type}"/>
            <column header="dt02" name="dt02" type="${date.type}"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-gestione-bollo">
        <createTable remarks="Tabella contenente le tipologie di atti soggette a bollo." tableName="tipo_atto_bollo">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo dell''atto." type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione dell''atto." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="desc_norma" remarks="Descrizione dell''articolo di  riferimento." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="im_bollo" remarks="Importo Unitario del Bollo" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_calcolo" remarks="Tipo Calcolo del Bollo (F= Foglio, E=Esemplare, I=Importo)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="limite_calcolo" remarks="Valore necessario per calcolare l''importo totale del bollo da applicare" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="righe_foglio" remarks="Numero Righe per Foglio" type="INT"/>
            <column name="dt_ini_validita" remarks="Data Inizio Validita del bollo" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="dt_fin_validita" remarks="Data Fine Validita del bollo" type="${date.type}"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="tipo_atto_bollo_pkey" tableName="tipo_atto_bollo"/>

        <loadData commentLineStartsWith="#" encoding="UTF-8" 
        		  file="csv/tipo_atto_bollo.csv" quotchar="&quot;" separator="," tableName="tipo_atto_bollo">
	        <column name="dt_ini_validita" type="${date.type}"/>
            <column name="dt_fin_validita" type="${date.type}"/>
            <column name="dacr" type="${date.type}"/>
            <column name="duva" type="${date.type}"/>
        </loadData>

        <createTable remarks="Tabella contenente gli atti assoggettati a bollo." tableName="atto_bollo">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio" remarks="Esercizio di registrazione dell''atto assoggettato a bollo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Codice UO che ha registrato l''atto assoggettato a bollo." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione_atto" remarks="Descrizione dell''atto assoggettato a bollo." type="VARCHAR(300)">
                <constraints nullable="false"/>
            </column>
            <column name="id_tipo_atto_bollo" remarks="Identificativo del tipo atto bollo." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="num_dettagli" remarks="Numero di dettagli su cui calcolare il bollo." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="num_righe" remarks="Numero di righe su cui calcolare il bollo." type="INT"/>
            <column name="num_registro" remarks="Progressivo, assegnato automaticamente per anno/UO." type="INT"/>
            <column name="cd_provv" remarks="Codice del provvedimento di registrazione dell''atto." type="VARCHAR(20)"/>
            <column name="nr_provv" remarks="Numero del provvedimento di registrazione dell''atto." type="BIGINT"/>
            <column name="dt_provv" remarks="Data del provvedimento di registrazione dell''atto." type="${date.type}"/>
            <column name="esercizio_contratto" remarks="Esercizio del Contratto." type="SMALLINT"/>
            <column name="stato_contratto" remarks="Stato del Contratto" type="CHAR(1)"/>
            <column name="pg_contratto" remarks="Progressivo del Contratto" type="BIGINT"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="atto_bollo_pkey" tableName="atto_bollo"/>

        <addForeignKeyConstraint baseColumnNames="id_tipo_atto_bollo" baseTableName="atto_bollo" constraintName="fk_atto_bollo01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_atto_bollo"/>

        <addForeignKeyConstraint baseColumnNames="esercizio_contratto,stato_contratto,pg_contratto" baseTableName="atto_bollo" constraintName="fk_atto_bollo02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,stato,pg_contratto" referencedTableName="contratto"/>

        <createIndex indexName="FX_ATTO_BOLLO01" tableName="atto_bollo">
            <column name="id_tipo_atto_bollo"/>
        </createIndex>

        <createIndex indexName="FX_ATTO_BOLLO02" tableName="atto_bollo">
            <column name="ESERCIZIO_CONTRATTO"/>
            <column name="STATO_CONTRATTO"/>
            <column name="PG_CONTRATTO"/>
        </createIndex>

        <update tableName="voce_iva">
            <column name="ti_bollo" value='S' type="CHAR(1)"/>
            <where>cd_voce_iva IN ('F3E','F3I','F4I','F4E','F5I', 'F5E', 'F4', 'F5', 'F6', 'F8', 'EB', 'N2', 'N3', 'N4', 'ES')</where>
        </update>

        <update tableName="voce_iva">
            <column name="ti_bollo" value='D' type="CHAR(1)"/>
            <where>cd_voce_iva IN ('N1', 'N6')</where>
        </update>
    </changeSet>

    <changeSet author="raffaele.pagano" runOnChange="true" id="create-view-V_CONS_ATTO_BOLLO">
        <sqlFile dbms="oracle" path="../expsigladb/View/V_CONS_ATTO_BOLLO.sql" relativeToChangelogFile="true" splitStatements="true" stripComments="false"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="modifiche-variazioni-personale">
        <addColumn tableName="parametri_ente">
            <column name="fl_variazioni_trasferimento" type="CHAR(1)" defaultValue="N" remarks="Attivazione Gestione Variazioni per trasferimento risorse del personale - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>

        <addColumn tableName="tipo_variazione">
            <column name="fl_variazione_trasferimento" type="CHAR(1)" defaultValue="N" remarks="Variazioni che consente anche trasferimento risorse del personale - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>

        <addColumn tableName="pdg_variazione">
            <column name="ti_motivazione_variazione" remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese." type="char(3)"/>
            <column name="id_matricola" type="varchar(10)" remarks="Matricola per cui viene effettuata la variazione."/>
            <column name="id_bando" type="varchar(10)" remarks="Identificativo del bando per cui viene effettuata la variazione."/>
        </addColumn>

        <addColumn tableName="var_stanz_res">
            <column name="ti_motivazione_variazione" remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese." type="char(3)"/>
            <column name="id_matricola" type="varchar(10)" remarks="Matricola per cui viene effettuata la variazione."/>
            <column name="id_bando" type="varchar(10)" remarks="Identificativo del bando per cui viene effettuata la variazione."/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="accessi_gestione_bollo">
    	<insert tableName="accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
        	<column name="ti_accesso" type="CHAR(1)" value=""/>
        	<column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Atto Soggetto a Bollo"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
        	<column name="ti_accesso" type="CHAR(1)" value=""/>
        	<column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Atto Soggetto a Bollo"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
        	<column name="ti_accesso" type="CHAR(1)" value=""/>
        	<column name="ds_accesso" type="VARCHAR(200)" value="Gestione Atto Soggetto a Bollo"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOV"/>
        	<column name="ti_accesso" type="CHAR(1)" value=""/>
        	<column name="ds_accesso" type="VARCHAR(200)" value="Gestione Atto Soggetto a Bollo"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
        	<column name="ti_accesso" type="CHAR(1)" value=""/>
        	<column name="ds_accesso" type="VARCHAR(200)" value="Consultazione Atti Soggetti a Bollo"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="ass_bp_accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
        	<column name="ti_funzione" type="CHAR(1)" value="M"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="ass_bp_accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
        	<column name="ti_funzione" type="CHAR(1)" value="V"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="ass_bp_accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
        	<column name="ti_funzione" type="CHAR(1)" value="M"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="ass_bp_accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOV"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
        	<column name="ti_funzione" type="CHAR(1)" value="V"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="ass_bp_accesso">
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
        	<column name="business_process" type="VARCHAR(200)" value="ConsAttoBolloBP"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="Bollo Virtuale"/>
        	<column name="pg_ordinamento" type="BIGINT" value="145"/>
        	<column name="fl_terminale" type="CHAR(1)" value="N"/>
        	<column name="livello" type="SMALLINT" value="3"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="BOLLO"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG"/>
        	<column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.M"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
        	<column name="pg_ordinamento" type="BIGINT" value="10"/>
        	<column name="fl_terminale" type="CHAR(1)" value="Y"/>
        	<column name="livello" type="SMALLINT" value="4"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.V"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
        	<column name="pg_ordinamento" type="BIGINT" value="20"/>
        	<column name="fl_terminale" type="CHAR(1)" value="Y"/>
        	<column name="livello" type="SMALLINT" value="4"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.C"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="consultazione"/>
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
        	<column name="business_process" type="VARCHAR(200)" value="ConsAttoBolloBP"/>
        	<column name="pg_ordinamento" type="BIGINT" value="30"/>
        	<column name="fl_terminale" type="CHAR(1)" value="Y"/>
        	<column name="livello" type="SMALLINT" value="4"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="C"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="tabelle di riferimento"/>
        	<column name="pg_ordinamento" type="BIGINT" value="40"/>
        	<column name="fl_terminale" type="CHAR(1)" value="N"/>
        	<column name="livello" type="SMALLINT" value="4"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="TABRIF"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="Tipo Atto"/>
        	<column name="pg_ordinamento" type="BIGINT" value="10"/>
        	<column name="fl_terminale" type="CHAR(1)" value="N"/>
        	<column name="livello" type="SMALLINT" value="5"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPOATT"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT.M"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
        	<column name="pg_ordinamento" type="BIGINT" value="10"/>
        	<column name="fl_terminale" type="CHAR(1)" value="Y"/>
        	<column name="livello" type="SMALLINT" value="6"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    	<insert tableName="albero_main">
        	<column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT.V"/>
        	<column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
        	<column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
        	<column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
        	<column name="pg_ordinamento" type="BIGINT" value="20"/>
        	<column name="fl_terminale" type="CHAR(1)" value="Y"/>
        	<column name="livello" type="SMALLINT" value="6"/>
        	<column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
        	<column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
        	<column name="duva" type="${date.type}" valueDate="${now}"/>
        	<column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="dacr" type="${date.type}" valueDate="${now}"/>
        	<column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
        	<column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="create-table-tipo-documento-generico">
        <createTable remarks="Tabella contenente le tipologie dei documenti generici." tableName="tipo_documento_generico">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo del tipo documento generico." type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_documento" remarks="Tipo Documento (A=Attivo, P=Passivo)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione del tipo documento generico." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="soggetto_bollo" remarks="Soggetto a Bollo (Y=Sì, N=No)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="tipo_documento_generico_pkey" tableName="tipo_documento_generico"/>

        <addColumn tableName="documento_generico">
            <column name="id_tipo_documento_generico" type="INT" remarks="ID Tipo documento Generico"/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="id_tipo_documento_generico" baseTableName="documento_generico" constraintName="fk_documento_generico06" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_documento_generico"/>

        <createIndex indexName="FX_DOCUMENTO_GENERICO06" tableName="documento_generico">
            <column name="id_tipo_documento_generico"/>
        </createIndex>
    </changeSet>
	<changeSet id="drop-table-excel_blob" author="marco.spasiano">
		<dropTable tableName="excel_blob"></dropTable>
	</changeSet>
	<changeSet id="drop-table-doc_firma_digitale" author="marco.spasiano">
		<dropTable tableName="doc_firma_digitale"></dropTable>
	</changeSet>
    <changeSet author="marco.spasiano" id="accessi_gestione_preferiti">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione dei Preferiti"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAggiungiPreferitiBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.SERV.PREFERITI"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Gestione Preferiti"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAggiungiPreferitiBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="15"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="2"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="PREFERITI"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.SERV"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="rosangela.pucciarelli" id="configurazione_cnr-add-configurazione-iva-detra">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/configurazione_cnr_iva_detraibile.csv" quotchar="&quot;" separator="," tableName="configurazione_cnr">
            <column header="esercizio" name="esercizio" type="NUMERIC"/>
            <column header="cd_unita_funzionale" name="cd_unita_funzionale" type="STRING"/>
            <column header="cd_chiave_primaria" name="cd_chiave_primaria" type="STRING"/>
            <column header="cd_chiave_secondaria" name="cd_chiave_secondaria" type="STRING"/>
            <column header="val01" name="val01" type="STRING"/>
            <column header="val02" name="val02" type="STRING"/>
            <column header="val03" name="val03" type="STRING"/>
            <column header="val04" name="val04" type="STRING"/>
            <column header="im01" name="im01" type="NUMERIC"/>
            <column header="im02" name="im02" type="NUMERIC"/>
            <column header="dt01" name="dt01" type="${date.type}"/>
            <column header="dt02" name="dt02" type="${date.type}"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>
    <changeSet author="rosangela.pucciarelli" id="modifiche-detraibilità-iva"> 
    <addColumn tableName="tipo_sezionale">
            <column name="fl_reg_tardiva" type="CHAR(1)" defaultValue="N" remarks="Tipo sezionale su cui registrare le fatture ancora detraibili ma tardive - Dominio: Y = Yes; N = No;.">
               <constraints nullable="false"/>
            </column>
    </addColumn>
    <insert tableName="tipo_sezionale">
            <column name="cd_tipo_sezionale" type="VARCHAR(10)" value="a/comrt"/>
            <column name="ds_tipo_sezionale" type="VARCHAR(50)" value="REGISTRO IVA ORDINARIO ACQUISTI Reg.Tardiva"/>
            <column name="ti_acquisti_vendite" type="CHAR(1)" value="A"/>
            <column name="ti_istituz_commerc" type="CHAR(1)" value="C"/>
            <column name="cd_attivita_commerciale"  type="VARCHAR(10)" value="1"/>
            <column name="fl_ordinario" type="CHAR(1)" value="Y"/>
            <column name="fl_san_marino_con_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_san_marino_senza_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_intra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_extra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_autofattura" type="CHAR(1)" value="N"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
            <column name="sezionale_ven_liquidazione" type="VARCHAR(10)" value=""/>
            <column name="ti_bene_servizio" type="CHAR(1)" value="*"/>
            <column name="fl_servizi_non_residenti"  type="CHAR(1)" value="N"/>
            <column name="ordina" type="BIGINT" value="4"/>
            <column name="fl_split_payment"  type="CHAR(1)" value="N"/>
            <column name="fl_reg_tardiva" type="CHAR(1)" value="Y"/>
     </insert>
     <insert tableName="tipo_sezionale">
            <column name="cd_tipo_sezionale" type="VARCHAR(10)" value="v/cautrt"/>
            <column name="ds_tipo_sezionale" type="VARCHAR(50)" value="REGISTRO IVA VENDITE DELLE AUTOFATTURE Reg.Tardiva"/>
            <column name="ti_acquisti_vendite" type="CHAR(1)" value="V"/>
            <column name="ti_istituz_commerc" type="CHAR(1)" value="C"/>
            <column name="cd_attivita_commerciale"  type="VARCHAR(10)" value="1"/>
            <column name="fl_ordinario" type="CHAR(1)" value="N"/>
            <column name="fl_san_marino_con_iva" type="CHAR(1)" value="N"/>
            <column name="fl_san_marino_senza_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_intra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_extra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_autofattura" type="CHAR(1)" value="Y"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
            <column name="sezionale_ven_liquidazione" type="VARCHAR(10)" value=""/>
            <column name="ti_bene_servizio" type="CHAR(1)" value="*"/>
            <column name="fl_servizi_non_residenti"  type="CHAR(1)" value="N"/>
            <column name="ordina" type="BIGINT" value="3"/>
            <column name="fl_split_payment"  type="CHAR(1)" value="N"/>
            <column name="fl_reg_tardiva" type="CHAR(1)" value="Y"/>
     </insert>
    </changeSet>
    <changeSet author="rosangela.pucciarelli" id="configurazione_cnr-add-configurazione-split-prof">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/configurazione_cnr_split_prof.csv" quotchar="&quot;" separator="," tableName="configurazione_cnr">
            <column header="esercizio" name="esercizio" type="NUMERIC"/>
            <column header="cd_unita_funzionale" name="cd_unita_funzionale" type="STRING"/>
            <column header="cd_chiave_primaria" name="cd_chiave_primaria" type="STRING"/>
            <column header="cd_chiave_secondaria" name="cd_chiave_secondaria" type="STRING"/>
            <column header="val01" name="val01" type="STRING"/>
            <column header="val02" name="val02" type="STRING"/>
            <column header="val03" name="val03" type="STRING"/>
            <column header="val04" name="val04" type="STRING"/>
            <column header="im01" name="im01" type="NUMERIC"/>
            <column header="im02" name="im02" type="NUMERIC"/>
            <column header="dt01" name="dt01" type="${date.type}"/>
            <column header="dt02" name="dt02" type="${date.type}"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_telefono_fatt-elettronica">
        <addColumn tableName="TELEFONO">
            <column name="FATT_ELETTRONICA" type="CHAR(1)" defaultValue="N" remarks="Riferimento per fatturazione elettronica.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_terzo_codice-destinatario-fatt">
        <addColumn tableName="TERZO">
            <column name="CODICE_DESTINATARIO_FATT" type="VARCHAR(7)" remarks="Codice destinatario fattura (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_elettr-privati">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="CODICE_DESTINATARIO_FATT" type="VARCHAR(7)" remarks="Codice destinatario fattura (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
            <column name="MAIL_FATTURA_ELETTRONICA" type="VARCHAR(100)" remarks="Indirizzo Mail per la fatturazione elettronica (solo per persone fisiche">
                <constraints nullable="true"/>
            </column>
            <column name="PEC_FATTURA_ELETTRONICA" type="VARCHAR(100)" remarks="Indirizzo PEC per la fatturazione elettronica (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_elettr-privati-2">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="FL_FATTURA_ELETTRONICA" type="VARCHAR(1)" defaultValue="N" remarks="Fattura Elettronica Y=Si N=No">
                <constraints nullable="false"/>
            </column>
        </addColumn>
				<update tableName="FATTURA_ATTIVA">
  	  		<column name="FL_FATTURA_ELETTRONICA" value="Y" type="varchar(1)"/>
	    		<where>CODICE_UNIVOCO_UFFICIO_IPA IS NOT NULL</where>
				</update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-terzo-sblocco_fatt_elettronica">
        <addColumn tableName="TERZO">
            <column name="FL_SBLOCCO_FATTURA_ELETTRONICA" type="VARCHAR(1)" defaultValue="N" remarks="Permette di creare la Fattura Elettronica anche in assenza di Codice Destinatario e PEC">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="configurazione_cnr-add-data_inizio_fatt_ele_privati">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/configurazione_cnr_data_inizio_fatt_ele_privati.csv" quotchar="&quot;" separator="," tableName="configurazione_cnr">
            <column header="esercizio" name="esercizio" type="NUMERIC"/>
            <column header="cd_unita_funzionale" name="cd_unita_funzionale" type="STRING"/>
            <column header="cd_chiave_primaria" name="cd_chiave_primaria" type="STRING"/>
            <column header="cd_chiave_secondaria" name="cd_chiave_secondaria" type="STRING"/>
            <column header="val01" name="val01" type="STRING"/>
            <column header="val02" name="val02" type="STRING"/>
            <column header="val03" name="val03" type="STRING"/>
            <column header="val04" name="val04" type="STRING"/>
            <column header="im01" name="im01" type="NUMERIC"/>
            <column header="im02" name="im02" type="NUMERIC"/>
            <column header="dt01" name="dt01" type="${date.type}"/>
            <column header="dt02" name="dt02" type="${date.type}"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_dt_ricezione_sdi">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="DT_RICEZIONE_SDI" type="date" remarks="Data Ricezione della fattura da parte di SDI">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="raffaele.pagano" id="configurazione_cnr_incarichi_mod_curriculum">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/configurazione_cnr_incarichi_mod_curriculum.csv" quotchar="&quot;" separator="," tableName="configurazione_cnr">
            <column header="esercizio" name="esercizio" type="NUMERIC"/>
            <column header="cd_unita_funzionale" name="cd_unita_funzionale" type="STRING"/>
            <column header="cd_chiave_primaria" name="cd_chiave_primaria" type="STRING"/>
            <column header="cd_chiave_secondaria" name="cd_chiave_secondaria" type="STRING"/>
            <column header="val01" name="val01" type="STRING"/>
            <column header="val02" name="val02" type="STRING"/>
            <column header="val03" name="val03" type="STRING"/>
            <column header="val04" name="val04" type="STRING"/>
            <column header="im01" name="im01" type="NUMERIC"/>
            <column header="im02" name="im02" type="NUMERIC"/>
            <column header="dt01" name="dt01" type="${date.type}"/>
            <column header="dt02" name="dt02" type="${date.type}"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>

    <changeSet author="marco.spasiano" id="create-table-tipologia-finanziamento">
        <createTable remarks="Tabella contenente le tipologie di finanziamento." tableName="tipo_finanziamento">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo dell tipo di finanziamento dominio (
                'FOE'=FOE,
                'FOE_PRO'=FOE progetti,
                'AUT'=Autofinanziamento,
                'AUT_AREE'=Autofinanziamento AREE,
                'RIM'=Rimborsi da soggetti terzi,
                'COF'=Cofinanziamento,
                'FIN'=Finanziamento,
                'ATT_COM'=Attività Commerciale pura,
                'ATT_COMM_TAR'=Attività commerciale a tariffario
                )" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione della tipologia di finanziamento" type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_piano_eco_fin" remarks="Piano economico-finanziario" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_ind" remarks="Associazione categoria-voci per il personale tempo indeterminato consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_det" remarks="Associazione categoria-voci per il personale tempo determinato consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_altro" remarks="Associazione categoria-voci per altre spese del personale" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_prev_ent_spesa" remarks="Previsione Entrata/Spesa consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_rip_costi_pers" remarks="Ripartizione costi del personale" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_quad_pdgp_econom" remarks="Quadratura pdgp con quota annuale del piano economico" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_contr_val_prog" remarks="Controllo validità del Progetto" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_piano_rend" remarks="Piano delle rendicontazioni" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_var_cons" remarks="Variazioni consentite" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_inc_cons" remarks="Incassi consentiti" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="id" constraintName="tipo_finanziamento_pkey" tableName="tipo_finanziamento"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_elemento_voce_add_piano_economico">
        <addColumn tableName="elemento_voce">
            <column name="cd_unita_piano" type="varchar(30)" remarks="Unità Organizzativa proprietaria della voce piano economico."/>
            <column name="cd_voce_piano" type="varchar(10)" remarks="Codice identificativo voce piano economico."/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="cd_unita_piano,cd_voce_piano" baseTableName="elemento_voce" constraintName="fk_elemento_voce_piaeco" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa,cd_voce_piano" referencedTableName="voce_piano_economico_prg"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_linea_attivita_drop_piano_economico">
        <dropForeignKeyConstraint baseTableName="ass_linea_attivita_esercizio" constraintName="fk_ass_linea_attivita_eserc01"/>

        <dropColumn columnName="cd_unita_piano" tableName="ass_linea_attivita_esercizio"/>
        <dropColumn columnName="cd_voce_piano" tableName="ass_linea_attivita_esercizio"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create_table_ass_progetto_piaeco_voce">
        <createTable remarks="Tabella contenente le associazioni tra il piano economico di un progetto e le voci di bilancio." tableName="ass_progetto_piaeco_voce">
            <column name="pg_progetto" remarks="Progressivo del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Unitא Organizzativa proprietaria della voce piano economico." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_voce_piano" remarks="Codice identificativo voce piano economico" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_piano" remarks="Esercizio piano economico. Se =0 indica il progetto complessivo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_voce" remarks="Esercizio di riferimento" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="ti_appartenenza" remarks="Definisce l'appartenenza (CNR o CdS) delle voci del piano finanziario di riferimento&#10;&#10;Dominio:&#10;C=CNR&#10;D=CDS" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="ti_gestione" remarks="Definisce la sezione (entrata o spesa) delle voci del piano finanziario di riferimento.&#10;&#10;Dominio:&#10;E=Entrate&#10;S=Spese" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_elemento_voce" remarks="Codice dell'elemento voce" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano,esercizio_voce,ti_appartenenza,ti_gestione,cd_elemento_voce" constraintName="ass_progetto_piaeco_voce_pkey" tableName="ass_progetto_piaeco_voce"/>

        <addForeignKeyConstraint baseColumnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano" baseTableName="ass_progetto_piaeco_voce" constraintName="fk_ass_progetto_piaeco_voce01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano" referencedTableName="progetto_piano_economico"/>

        <addForeignKeyConstraint baseColumnNames="esercizio_voce,ti_appartenenza,ti_gestione,cd_elemento_voce" baseTableName="ass_progetto_piaeco_voce" constraintName="fk_ass_progetto_piaeco_voce02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,ti_appartenenza,ti_gestione,cd_elemento_voce" referencedTableName="elemento_voce"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_other_field_modify_column">
        <dropColumn columnName="fl_piano_economico" tableName="progetto_other_field"/>

        <addColumn tableName="progetto_other_field">
            <column name="id_tipo_finanziamento" type="INT" remarks="Chiave Primaria tipo finanziamento."/>
            <column name="stato" remarks="Stato del progetto" type="CHAR(3)"/>
            <column name="dt_inizio" remarks="Data inizio del progetto." type="${date.type}"/>
            <column name="dt_fine" remarks="Data fine del progetto." type="${date.type}"/>
            <column name="dt_proroga" remarks="Data proroga del progetto." type="${date.type}"/>
            <column name="im_finanziato" remarks="Importo finanziario del progetto" type="numeric(15, 2)"/>
            <column name="im_cofinanziato" remarks="Importo cofinanziario del progetto" type="numeric(15, 2)"/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="id_tipo_finanziamento" baseTableName="progetto_other_field" constraintName="fk_progetto_other_field01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_finanziamento"/>
    </changeSet>    

    <changeSet author="raffaele.pagano" id="alter_progetto_piano_economico">
        <renameColumn oldColumnName="im_spesa" newColumnName="im_spesa_finanziato" tableName="progetto_piano_economico"/>
        <addColumn tableName="progetto_piano_economico">
            <column name="im_spesa_cofinanziato" remarks="Importo spesa cofinanziario del progetto" type="numeric(15, 2)"/>
        </addColumn>
    </changeSet>    
    <changeSet author="marco.spasiano" id="insert_base_tipo_finanziamento">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="csv/tipo_finanziamento.csv" quotchar="&quot;" separator="," tableName="tipo_finanziamento">
            <column header="id" name="id" type="NUMERIC"/>
            <column header="codice" name="codice" type="STRING"/>
            <column header="descrizione" name="descrizione" type="STRING"/>
            <column header="fl_piano_eco_fin" name="fl_piano_eco_fin" type="STRING"/>
            <column header="fl_ass_cat_voci_ind" name="fl_ass_cat_voci_ind" type="STRING"/>
            <column header="fl_ass_cat_voci_det" name="fl_ass_cat_voci_det" type="STRING"/>
            <column header="fl_ass_cat_voci_altro" name="fl_ass_cat_voci_altro" type="STRING"/>
            <column header="fl_prev_ent_spesa" name="fl_prev_ent_spesa" type="STRING"/>
            <column header="fl_rip_costi_pers" name="fl_rip_costi_pers" type="STRING"/>
            <column header="fl_quad_pdgp_econom" name="fl_quad_pdgp_econom" type="STRING"/>
            <column header="fl_contr_val_prog" name="fl_contr_val_prog" type="STRING"/>
            <column header="fl_piano_rend" name="fl_piano_rend" type="STRING"/>
            <column header="fl_var_cons" name="fl_var_cons" type="STRING"/>
            <column header="fl_inc_cons" name="fl_inc_cons" type="STRING"/>
            <column header="dacr" name="dacr" type="${date.type}"/>
            <column header="utcr" name="utcr" type="STRING"/>
            <column header="duva" name="duva" type="${date.type}"/>
            <column header="utuv" name="utuv" type="STRING"/>
            <column header="pg_ver_rec" name="pg_ver_rec" type="NUMERIC"/>
        </loadData>
    </changeSet>
    <changeSet author="marco.spasiano" id="accessi_tipo_finanziamento">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Finanziamento"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Tipo Finanziamento"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Finanziamento"/>
            <column name="pg_ordinamento" type="BIGINT" value="146"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPO_FINANZIAMENTO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_voce_piano_economico_prg001">
        <addColumn tableName="voce_piano_economico_prg">
            <column name="tipologia" remarks="Tipologia voce piano economico" type="CHAR(3)"/>
            <column name="fl_link_voci_bilancio_associate" type="CHAR(1)" defaultValue="N" remarks="Voci di Bilancio associate collegate in automatico. - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
            <column name="fl_add_voci_bilancio" type="CHAR(1)" defaultValue="N" remarks="Voci di Bilancio associabili manualmente. - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="marco.spasiano" id="alter_progetto_for_other_field">
        <addColumn tableName="progetto_sip">
            <column name="pg_progetto_other_field" remarks="Progressivo del progetto" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="pg_progetto_other_field" baseTableName="progetto_sip" constraintName="progetto_sip_fk07" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto" referencedTableName="progetto_other_field"/>
        <addColumn tableName="progetto_sic">
            <column name="pg_progetto_other_field" remarks="Progressivo del progetto" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="pg_progetto_other_field" baseTableName="progetto_sic" constraintName="progetto_sic_fk07" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto" referencedTableName="progetto_other_field"/>
    </changeSet>
    <changeSet author="marco.spasiano" id="accessi_ruolo_pdgp">
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPC"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPC"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPH"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPV"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPV"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="spostamento_voce_menu_finanziamenti" author="marco.spasiano">
        <delete tableName="albero_main">
            <where>cd_nodo in ('0.CFG.TIPO_FINANZIAMENTO', '0.CFG.TIPO_FINANZIAMENTO.M', '0.CFG.TIPO_FINANZIAMENTO.V')</where>
        </delete>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Finanziamento"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPO_FINANZIAMENTO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter-table-finanziamento-e-voce-economica">
        <addColumn tableName="tipo_finanziamento">
            <column name="fl_all_prev_fin" remarks="Previsione totale quota finanziata" type="CHAR(1)" />
        </addColumn>
        <update tableName="tipo_finanziamento">
            <column name="fl_all_prev_fin" value='N' type="CHAR(1)"/>
        </update>
        <addNotNullConstraint columnName="fl_all_prev_fin" tableName="tipo_finanziamento"/>

        <addColumn tableName="voce_piano_economico_prg">
            <column name="fl_all_prev_fin" remarks="Previsione totale quota finanziata" type="CHAR(1)" />
        </addColumn>
        <update tableName="voce_piano_economico_prg">
            <column name="fl_all_prev_fin" value='N' type="CHAR(1)"/>
        </update>
        <addNotNullConstraint columnName="fl_all_prev_fin" tableName="voce_piano_economico_prg"/>
    </changeSet>
</databaseChangeLog>
